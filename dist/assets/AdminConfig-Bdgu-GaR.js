import{j as e,ak as R,ab as ce,a9 as oe,a8 as O,ay as p,az as A,m as F,K as v,aA as H,H as U,av as y,t as de}from"./ui-vendor-BbdbCsUZ.js";import{r as l}from"./react-vendor-DTdTrAaS.js";import{C as c,b as u,c as j,d as B,a as o}from"./card-po8LLNoY.js";import{B as m}from"./button-DV96QXU2.js";import{I as x}from"./input-BScXBkmv.js";import{L as i}from"./label-CwSIXhkn.js";import{S as W,a as q,b as G,c as X,d as w}from"./select-eU2r9RA0.js";import{T as me,a as xe,b as N,c as b}from"./index-CceCJFVk.js";import{A as T,a as E}from"./alert-BbkdLCMH.js";import{B as r}from"./badge-Dt5wVqj5.js";import{S as he}from"./separator-BXEYAIvQ.js";import{c as n}from"./configService-BRo5g1g0.js";import{d as pe}from"./index-CU51xw2J.js";import"./chart-vendor-CC4yw7IZ.js";import"./query-vendor-CYSRxJYb.js";import"./router-vendor-Dt4hhyuR.js";import"./utils-vendor-BbYF_8OW.js";const ue="ImperatoreBev26",Te=()=>{const[J,Q]=l.useState(!1),[D,L]=l.useState(""),[z,Y]=l.useState(!1),[d,P]=l.useState(n.getConfig());l.useState(n.getPayPalConfig());const[h,K]=l.useState(n.getStripeConfig()),[g,C]=l.useState(n.getBACSConfig()),[f,S]=l.useState(n.getCODConfig()),[_,V]=l.useState(!1),[k,I]=l.useState(!1),{toast:t}=pe();l.useEffect(()=>{const a=n.getConfig();P(a)},[]);const Z=a=>{a.preventDefault(),D===ue?(Q(!0),t({title:"Accesso autorizzato",description:"Benvenuto nell'area amministrativa."})):(t({title:"Password errata",description:"La password inserita non è corretta.",variant:"destructive"}),L(""))};if(!J)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs(c,{children:[e.jsxs(u,{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100",children:e.jsx(R,{className:"h-6 w-6 text-blue-600"})}),e.jsx(j,{className:"mt-6 text-2xl font-bold text-gray-900",children:"Area Amministrativa"}),e.jsx(B,{children:"Inserisci la password per accedere alla configurazione"})]}),e.jsx(o,{children:e.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(x,{id:"password",type:z?"text":"password",value:D,onChange:a=>L(a.target.value),placeholder:"Inserisci la password",className:"pr-10",required:!0}),e.jsx(m,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>Y(!z),children:z?e.jsx(ce,{className:"h-4 w-4 text-gray-400"}):e.jsx(oe,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs(m,{type:"submit",className:"w-full",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Accedi"]})]})})]})})});const M=(a,s)=>{const re={...d,paypal:{...d.paypal,[a]:s}};P(re),I(!0)},$=async()=>{V(!0);try{n.updateConfig(d),I(!1),t({title:"Configurazione salvata",description:"Le impostazioni di pagamento sono state aggiornate con successo.",variant:"default"})}catch{t({title:"Errore",description:"Si è verificato un errore durante il salvataggio.",variant:"destructive"})}finally{V(!1)}},ee=()=>{try{n.updateStripeConfig(h),t({title:"Successo",description:"Configurazione Stripe salvata con successo!",variant:"default"})}catch{t({title:"Errore",description:"Errore nel salvare la configurazione Stripe",variant:"destructive"})}},ae=()=>{try{n.updateSatispayConfig(satispayConfig),t({title:"Successo",description:"Configurazione Satispay salvata con successo!",variant:"default"})}catch{t({title:"Errore",description:"Errore nel salvare la configurazione Satispay",variant:"destructive"})}},se=()=>{try{n.updateBACSConfig(g),t({title:"Successo",description:"Configurazione Bonifico Bancario salvata con successo!",variant:"default"})}catch{t({title:"Errore",description:"Errore nel salvare la configurazione Bonifico Bancario",variant:"destructive"})}},ie=()=>{try{n.updateCODConfig(f),t({title:"Successo",description:"Configurazione Contrassegno salvata con successo!",variant:"default"})}catch{t({title:"Errore",description:"Errore nel salvare la configurazione Contrassegno",variant:"destructive"})}},te=()=>{n.resetToDefaults();const a=n.getConfig();P(a),I(!1),t({title:"Configurazione ripristinata",description:"Le impostazioni sono state ripristinate ai valori predefiniti.",variant:"default"})},ne=d.paypal.clientId!=="pk_test_placeholder"&&d.paypal.clientId.length>10,le=h.publishableKey!=="pk_test_placeholder"&&h.publishableKey.length>10;return e.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(O,{className:"h-8 w-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold",children:"Configurazione Pagamenti"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Gestisci le configurazioni di PayPal e Stripe per i pagamenti del tuo e-commerce."})]}),k&&e.jsxs(T,{className:"mb-6",children:[e.jsx(p,{className:"h-4 w-4"}),e.jsx(E,{children:"Hai modifiche non salvate. Ricordati di salvare le configurazioni prima di uscire."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"PayPal"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:ne?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx(r,{variant:"secondary",className:"text-xs",children:"Configurato"})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 text-orange-500"}),e.jsx(r,{variant:"outline",className:"text-xs",children:"Non configurato"})]})})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Stripe"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:le?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx(r,{variant:"secondary",className:"text-xs",children:"Configurato"})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 text-orange-500"}),e.jsx(r,{variant:"outline",className:"text-xs",children:"Non configurato"})]})})]})]})})}),e.jsx(c,{children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"h-8 w-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Stato"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:k?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"h-4 w-4 text-orange-500"}),e.jsx(r,{variant:"outline",className:"text-xs",children:"Modifiche pending"})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx(r,{variant:"secondary",className:"text-xs",children:"Sincronizzato"})]})})]})]})})})]}),e.jsxs(me,{defaultValue:"paypal",className:"space-y-6",children:[e.jsxs(xe,{className:"grid w-full grid-cols-5",children:[e.jsxs(N,{value:"paypal",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"PayPal"]}),e.jsxs(N,{value:"stripe",className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Stripe"]}),e.jsxs(N,{value:"satispay",className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-4 w-4"}),"Satispay"]}),e.jsxs(N,{value:"bacs",className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Bonifico"]}),e.jsxs(N,{value:"cod",className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),"Contrassegno"]})]}),e.jsx(b,{value:"paypal",children:e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-5 w-5 text-blue-600"}),"Configurazione PayPal"]}),e.jsx(B,{children:"Configura le credenziali PayPal per abilitare i pagamenti tramite PayPal nel tuo store."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"paypal-client-id",children:"Client ID PayPal"}),e.jsx(x,{id:"paypal-client-id",type:"text",placeholder:"Inserisci il Client ID di PayPal",value:d.paypal.clientId,onChange:a=>M("clientId",a.target.value),className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Puoi trovare il Client ID nel tuo dashboard PayPal Developer."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"paypal-environment",children:"Ambiente"}),e.jsxs(W,{value:d.paypal.environment,onValueChange:a=>M("environment",a),children:[e.jsx(q,{children:e.jsx(G,{})}),e.jsxs(X,{children:[e.jsx(w,{value:"sandbox",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",className:"text-xs",children:"TEST"}),"Sandbox (Test)"]})}),e.jsx(w,{value:"production",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"default",className:"text-xs",children:"LIVE"}),"Production (Live)"]})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Usa Sandbox per i test e Production per i pagamenti reali."})]}),d.paypal.environment==="production"&&e.jsxs(T,{children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs(E,{children:[e.jsx("strong",{children:"Attenzione:"})," Stai utilizzando l'ambiente di produzione. Assicurati che le credenziali siano corrette prima di salvare."]})]})]})]})}),e.jsx(b,{value:"stripe",children:e.jsxs(c,{children:[e.jsxs(u,{children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-purple-600"}),"Configurazione Stripe"]}),e.jsx(B,{children:"Configura le credenziali Stripe per abilitare i pagamenti con carta di credito."})]}),e.jsxs(o,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"stripe-publishable-key",children:"Publishable Key"}),e.jsx(x,{id:"stripe-publishable-key",type:"text",placeholder:"pk_test_... o pk_live_...",value:h.publishableKey,onChange:a=>K(s=>({...s,publishableKey:a.target.value})),className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"La Publishable Key è sicura da utilizzare nel frontend."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"stripe-environment",children:"Ambiente"}),e.jsxs(W,{value:h.environment,onValueChange:a=>K(s=>({...s,environment:a})),children:[e.jsx(q,{children:e.jsx(G,{})}),e.jsxs(X,{children:[e.jsx(w,{value:"test",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",className:"text-xs",children:"TEST"}),"Test Mode"]})}),e.jsx(w,{value:"live",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"default",className:"text-xs",children:"LIVE"}),"Live Mode"]})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Usa Test Mode per i test e Live Mode per i pagamenti reali."})]}),h.environment==="live"&&e.jsxs(T,{children:[e.jsx(p,{className:"h-4 w-4"}),e.jsxs(E,{children:[e.jsx("strong",{children:"Attenzione:"})," Stai utilizzando l'ambiente live. I pagamenti saranno reali. Verifica le credenziali prima di salvare."]})]}),e.jsxs(m,{onClick:ee,className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Salva Configurazione Stripe"]})]})]})}),e.jsx(b,{value:"satispay",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5"}),"Configurazione Satispay"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"satispay-enabled",children:"Abilita Satispay"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"satispay-enabled",type:"checkbox",checked:satispayConfig.enabled,onChange:a=>setSatispayConfig(s=>({...s,enabled:a.target.checked})),className:"rounded border-gray-300"}),e.jsx(i,{htmlFor:"satispay-enabled",className:"text-sm font-normal",children:"Abilita pagamenti Satispay"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"satispay-key-id",children:"Key ID Satispay"}),e.jsx(x,{id:"satispay-key-id",placeholder:"Inserisci il tuo Key ID Satispay",value:satispayConfig.keyId||"",onChange:a=>setSatispayConfig(s=>({...s,keyId:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"satispay-private-key",children:"Chiave Privata"}),e.jsx("textarea",{id:"satispay-private-key",placeholder:"Inserisci la tua chiave privata Satispay",value:satispayConfig.privateKey||"",onChange:a=>setSatispayConfig(s=>({...s,privateKey:a.target.value})),className:"w-full p-2 border border-gray-300 rounded-md min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"satispay-public-key",children:"Chiave Pubblica"}),e.jsx("textarea",{id:"satispay-public-key",placeholder:"Inserisci la tua chiave pubblica Satispay",value:satispayConfig.publicKey||"",onChange:a=>setSatispayConfig(s=>({...s,publicKey:a.target.value})),className:"w-full p-2 border border-gray-300 rounded-md min-h-[80px]"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"satispay-environment",children:"Ambiente"}),e.jsxs("select",{id:"satispay-environment",value:satispayConfig.environment,onChange:a=>setSatispayConfig(s=>({...s,environment:a.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"sandbox",children:"Sandbox (Test)"}),e.jsx("option",{value:"production",children:"Produzione"})]})]}),e.jsxs(m,{onClick:ae,className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Salva Configurazione Satispay"]})]})]})}),e.jsx(b,{value:"bacs",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-5 w-5"}),"Configurazione Bonifico Bancario"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bacs-enabled",children:"Abilita Bonifico Bancario"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"bacs-enabled",type:"checkbox",checked:g.enabled,onChange:a=>C(s=>({...s,enabled:a.target.checked})),className:"rounded border-gray-300"}),e.jsx(i,{htmlFor:"bacs-enabled",className:"text-sm font-normal",children:"Abilita pagamenti con bonifico bancario"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bacs-account-name",children:"Nome del Conto"}),e.jsx(x,{id:"bacs-account-name",placeholder:"Nome del beneficiario",value:g.accountName,onChange:a=>C(s=>({...s,accountName:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bacs-iban",children:"IBAN"}),e.jsx(x,{id:"bacs-iban",placeholder:"IT60 X054 2811 1010 0000 0123 456",value:g.iban,onChange:a=>C(s=>({...s,iban:a.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"bacs-bank-name",children:"Nome della Banca"}),e.jsx(x,{id:"bacs-bank-name",placeholder:"Nome della banca",value:g.bankName,onChange:a=>C(s=>({...s,bankName:a.target.value}))})]}),e.jsxs(m,{onClick:se,className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Salva Configurazione Bonifico"]})]})]})}),e.jsx(b,{value:"cod",children:e.jsxs(c,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Configurazione Contrassegno"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cod-enabled",children:"Abilita Contrassegno"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{id:"cod-enabled",type:"checkbox",checked:f.enabled,onChange:a=>S(s=>({...s,enabled:a.target.checked})),className:"rounded border-gray-300"}),e.jsx(i,{htmlFor:"cod-enabled",className:"text-sm font-normal",children:"Abilita pagamento alla consegna"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cod-fee-amount",children:"Commissione Contrassegno (€)"}),e.jsx(x,{id:"cod-fee-amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:f.feeAmount,onChange:a=>S(s=>({...s,feeAmount:parseFloat(a.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cod-fee-type",children:"Tipo Commissione"}),e.jsxs("select",{id:"cod-fee-type",value:f.feeType,onChange:a=>S(s=>({...s,feeType:a.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[e.jsx("option",{value:"fixed",children:"Importo Fisso"}),e.jsx("option",{value:"percentage",children:"Percentuale"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"cod-instructions",children:"Istruzioni per il Cliente"}),e.jsx("textarea",{id:"cod-instructions",placeholder:"Istruzioni per il pagamento alla consegna...",value:f.instructions,onChange:a=>S(s=>({...s,instructions:a.target.value})),className:"w-full p-2 border border-gray-300 rounded-md min-h-[80px]"})]}),e.jsxs(m,{onClick:ie,className:"w-full",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),"Salva Configurazione Contrassegno"]})]})]})})]}),e.jsx(he,{className:"my-8"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[e.jsxs(m,{variant:"outline",onClick:te,className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4"}),"Ripristina Default"]}),e.jsxs(m,{onClick:$,disabled:!k||_,className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4"}),_?"Salvando...":"Salva Configurazione"]})]})]})};export{Te as default};
