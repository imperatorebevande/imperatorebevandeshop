import{j as e,z as _,N as k,H as C,y as S,M as w,a2 as H,n as K,I as U}from"./ui-vendor-BbdbCsUZ.js";import{r as m}from"./react-vendor-DTdTrAaS.js";import{L as T}from"./router-vendor-Dt4hhyuR.js";import{getAllZones as I}from"./deliveryZones-Dl4LSmEF.js";import{B as p}from"./button-DV96QXU2.js";import{C as y,a as j,b as V,c as Y}from"./card-po8LLNoY.js";import{B as O}from"./badge-Dt5wVqj5.js";import"./index-CU51xw2J.js";import"./chart-vendor-CC4yw7IZ.js";import"./query-vendor-CYSRxJYb.js";import"./utils-vendor-BbYF_8OW.js";const de=()=>{const f=m.useRef(null),[q,M]=m.useState(null),[z,E]=m.useState([]),[n,u]=m.useState(null),[P,N]=m.useState(!0),[J,h]=m.useState(null),[W,L]=m.useState([]),[Z,$]=m.useState([]);m.useEffect(()=>{const s=I();E(s),R()},[]);const R=async()=>{if(f.current)try{window.google||await D();const s=new window.google.maps.Map(f.current,{center:{lat:41.1171,lng:16.8719},zoom:11,mapTypeId:window.google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,styles:[{featureType:"all",elementType:"geometry",stylers:[{color:"#f5f7fa"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#1B5AAB"},{lightness:80}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#1B5AAB"},{lightness:90}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#1B5AAB"}]}]});M(s);const l=I();G(s,l),N(!1)}catch(s){console.error("Errore nell'inizializzazione della mappa:",s),N(!1)}},D=()=>new Promise((s,l)=>{if(window.google){s();return}const a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=geometry",a.async=!0,a.defer=!0,a.onload=()=>s(),a.onerror=()=>l(new Error("Errore nel caricamento di Google Maps")),document.head.appendChild(a)}),G=(s,l)=>{const a=[],i=[],d=[];l.forEach(t=>{if(t.polygon&&t.polygon.coordinates){const b=t.polygon.coordinates[0].map(c=>({lat:c[1],lng:c[0]})),x=new window.google.maps.Polygon({paths:b,strokeColor:t.color,strokeOpacity:.8,strokeWeight:2,fillColor:t.color,fillOpacity:.2,clickable:!0});if(x.originalColor=t.color,x.setMap(s),a.push(x),x.addListener("click",c=>{const g=d.find(o=>o.zoneId===t.id),r=i.find(o=>o.zoneId===t.id);g&&r&&(i.forEach(o=>{o!==r&&o.close()}),v(a,x),r.setPosition(c.latLng),r.open(s),h(r),u(t))}),t.polygon.center){const c=new window.google.maps.Marker({position:t.polygon.center,map:s,title:t.name,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:t.color,fillOpacity:.8,strokeColor:"#ffffff",strokeWeight:2}});c.zoneId=t.id,d.push(c);const g=A(t),r=new window.google.maps.InfoWindow({content:`
              <div style="padding: 16px; font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; max-width: 280px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                  <div style="width: 12px; height: 12px; border-radius: 50%; background-color: ${t.color};"></div>
                  <h3 style="margin: 0; color: #1B5AAB; font-size: 18px; font-weight: 600;">${t.name}</h3>
                </div>
                <p style="margin: 0 0 12px 0; font-size: 14px; color: #64748b; line-height: 1.5;">${t.description}</p>
                ${g.length>0?`
                  <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #e2e8f0;">
                    <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 8px;">
                      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#1B5AAB" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                      </svg>
                      <span style="font-size: 12px; font-weight: 600; color: #1B5AAB;">Orari Disponibili</span>
                    </div>
                    <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                      ${g.map(o=>`
                        <span style="background: #dcfce7; color: #166534; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 500;">${o}</span>
                      `).join("")}
                    </div>
                  </div>
                `:""}
              </div>
            `});r.zoneId=t.id,i.push(r),r.addListener("closeclick",()=>{h(null)}),c.addListener("click",()=>{i.forEach(o=>{o!==r&&o.close()}),v(a,x),r.open(s,c),h(r),u(t)})}}}),L(a),$(i)},v=(s,l)=>{s.forEach(a=>{if(a!==l)a.setOptions({strokeColor:"#9CA3AF",fillColor:"#9CA3AF",strokeOpacity:.4,fillOpacity:.1,strokeWeight:1});else{const i=a.originalColor;a.setOptions({strokeColor:i,fillColor:i,strokeOpacity:.8,fillOpacity:.3,strokeWeight:3})}})},A=s=>{var i;const l=[];for(let d=7;d<16;d++){const t=`${d.toString().padStart(2,"0")}:00`,b=`${(d+1).toString().padStart(2,"0")}:00`;l.push(`${t} - ${b}`)}const a=((i=s.timeSlotRestrictions)==null?void 0:i.excludedSlots)||[];return l.filter(d=>!a.includes(d))},B=()=>{W.forEach(s=>{const l=s.originalColor;s.setOptions({strokeColor:l,fillColor:l,strokeOpacity:.8,fillOpacity:.2,strokeWeight:2})}),Z.forEach(s=>{s.close()}),h(null),u(null)},F=()=>{window.history.back()};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 touch-manipulation",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-white/80 backdrop-blur-sm shadow-xl border-b border-blue-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-6 flex-1",children:[e.jsxs(p,{onClick:F,variant:"outline",size:"sm",className:"flex items-center gap-1 sm:gap-2 hover:bg-[#1B5AAB] hover:text-white border-[#1B5AAB] text-[#1B5AAB] transition-all duration-300 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(_,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Indietro"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-1",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-gradient-to-br from-[#1B5AAB] to-blue-600 rounded-lg sm:rounded-xl shadow-lg",children:e.jsx(k,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h1",{className:"text-lg sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-[#1B5AAB] to-blue-600 bg-clip-text text-transparent truncate",children:"Zone di Consegna"}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-600 flex items-center gap-1 sm:gap-2 truncate",children:[e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:"Scopri le aree servite e gli orari disponibili"}),e.jsx("span",{className:"sm:hidden",children:"Aree servite"})]})]})]})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(T,{to:"/prodotti",children:e.jsxs(p,{className:"bg-gradient-to-r from-[#1B5AAB] to-blue-600 hover:from-blue-600 hover:to-[#1B5AAB] text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-xs sm:text-sm px-3 sm:px-4 py-2 sm:py-2.5 font-semibold",size:"sm",children:[e.jsx(S,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Vai allo Shop"}),e.jsx("span",{className:"sm:hidden",children:"Shop"})]})})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-4 sm:py-8 pt-20 sm:pt-24",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[e.jsxs(O,{variant:"secondary",className:"bg-green-100 text-green-800 text-xs sm:text-sm",children:[z.length," Zone Attive"]}),n&&e.jsxs(p,{onClick:B,variant:"outline",size:"sm",className:"flex items-center gap-1 sm:gap-2 hover:bg-[#1B5AAB] hover:text-white border-[#1B5AAB] text-[#1B5AAB] transition-all duration-300 text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2",children:[e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Mostra Tutte le Zone"}),e.jsx("span",{className:"sm:hidden",children:"Tutte"})]})]})}),e.jsx("div",{children:e.jsx(y,{className:"h-[400px] sm:h-[500px] lg:h-[700px] overflow-hidden shadow-xl sm:shadow-2xl border-0 bg-white/80 backdrop-blur-sm rounded-xl sm:rounded-2xl",children:e.jsxs(j,{className:"p-0 h-full relative",children:[P&&e.jsx("div",{className:"absolute inset-0 bg-white/95 backdrop-blur-sm flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center px-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 sm:h-16 sm:w-16 border-4 border-[#1B5AAB]/20 border-t-[#1B5AAB] mx-auto mb-4 sm:mb-6"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 sm:w-6 sm:h-6 text-[#1B5AAB] animate-pulse"})})]}),e.jsx("p",{className:"text-[#1B5AAB] font-semibold text-base sm:text-lg",children:"Caricamento mappa..."}),e.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-2",children:"Preparazione delle zone di consegna"})]})}),e.jsx("div",{ref:f,className:"w-full h-full rounded-lg"})]})})}),n&&e.jsxs(y,{className:"shadow-xl border-0 bg-gradient-to-br from-white to-gray-50/50 backdrop-blur-sm overflow-hidden rounded-xl sm:rounded-2xl",children:[e.jsx("div",{className:"h-2 bg-gradient-to-r from-[#1B5AAB] to-blue-600"}),e.jsx(V,{className:"pb-3 sm:pb-4 p-4 sm:p-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs(Y,{className:"flex items-start gap-3 text-lg sm:text-xl flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 sm:p-3 rounded-lg sm:rounded-xl shadow-lg flex-shrink-0",style:{backgroundColor:n.color+"20",border:`2px solid ${n.color}40`},children:e.jsx(w,{className:"w-4 h-4 sm:w-6 sm:h-6",style:{color:n.color}})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-800 break-words",children:n.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 font-normal",children:"Dettagli zona di consegna"})]})]}),e.jsxs(p,{onClick:B,variant:"outline",size:"sm",className:"hover:bg-[#1B5AAB] hover:text-white border-[#1B5AAB] text-[#1B5AAB] transition-all duration-300 flex-shrink-0 px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm",children:[e.jsx(w,{className:"w-3 h-3 sm:w-4 sm:h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Mostra Tutte"})]})]})}),e.jsxs(j,{className:"space-y-4 sm:space-y-6 p-4 sm:p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx("div",{className:"p-3 sm:p-4 bg-gray-50/50 rounded-lg sm:rounded-xl border border-gray-100",children:e.jsx("p",{className:"text-xs sm:text-sm text-gray-700 leading-relaxed break-words",children:n.description})}),n.timeSlotRestrictions&&e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 pb-2 border-b border-gray-200",children:[e.jsx("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-md sm:rounded-lg flex-shrink-0",children:e.jsx(H,{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#1B5AAB]"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800 text-sm sm:text-base truncate",children:"Orari di Consegna"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Fasce orarie disponibili"})]})]}),(()=>{const s=A(n);return s.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("p",{className:"text-sm font-semibold text-green-700",children:"Orari Disponibili"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.map((l,a)=>e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 p-2 sm:p-3 bg-green-50 border border-green-200 rounded-md sm:rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(K,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"font-medium text-green-800 text-xs sm:text-sm flex-1 min-w-0 truncate",children:l}),e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(O,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs px-1.5 sm:px-2 py-0.5",children:[e.jsx("span",{className:"hidden sm:inline",children:"Disponibile"}),e.jsx("span",{className:"sm:hidden",children:"OK"})]})})]},a))})]})})()]})]}),e.jsxs("div",{className:"p-3 sm:p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg sm:rounded-xl border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{className:"w-3 h-3 sm:w-4 sm:h-4 text-[#1B5AAB] flex-shrink-0"}),e.jsx("span",{className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] truncate",children:"Informazioni Consegna"})]}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed break-words",children:"Gli orari mostrati sono indicativi e possono variare in base alla disponibilità del servizio. Contattaci per maggiori informazioni sui tempi di consegna."})]})]})]}),!n&&e.jsx(y,{className:"shadow-xl border-0 bg-gradient-to-br from-[#1B5AAB]/5 to-blue-50 backdrop-blur-sm",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"p-4 bg-white/60 rounded-full w-fit mx-auto",children:e.jsx(U,{className:"w-8 h-8 text-[#1B5AAB]"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Come utilizzare la mappa"}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsx("p",{children:"• Clicca su una zona colorata per vedere i dettagli"}),e.jsx("p",{children:"• Visualizza gli orari di consegna disponibili"}),e.jsx("p",{children:"• Usa i marker per informazioni rapide"})]})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsx(T,{to:"/prodotti",children:e.jsxs(p,{className:"bg-gradient-to-r from-[#1B5AAB] to-blue-600 hover:from-blue-600 hover:to-[#1B5AAB] text-white shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 font-semibold px-6 py-3 rounded-xl w-full sm:w-auto",size:"lg",children:[e.jsx(S,{className:"w-5 h-5 mr-2"}),"Scopri i Nostri Prodotti"]})}),e.jsx("div",{className:"pt-2 border-t border-white/50",children:e.jsx("p",{className:"text-xs text-gray-500 italic",children:"Imperatore Bevande - Servizio consegne professionale"})})]})]})})})]})})]})};export{de as default};
