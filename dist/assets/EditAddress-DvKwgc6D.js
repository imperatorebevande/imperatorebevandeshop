import{j as s,a4 as k,a5 as z,a6 as q,X as E,a7 as F,a8 as I,a9 as T,aa as L,s as O}from"./ui-vendor-CBu0MraC.js";import{r as p}from"./react-vendor-DTdTrAaS.js";import{c as m}from"./index-I5fS8uHh.js";import{I as o,B as D}from"./input-BrCX-FV-.js";import{L as d}from"./label-BP42n_nh.js";import{f as H}from"./useWooCommerce-izqWt-aK.js";import{A as M}from"./AddressAutocomplete-BRjemWj9.js";const es=T,U=L,S=p.forwardRef(({className:t,...i},e)=>s.jsx(k,{ref:e,className:m("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i}));S.displayName=k.displayName;const V=p.forwardRef(({className:t,children:i,...e},r)=>s.jsxs(U,{children:[s.jsx(S,{}),s.jsxs(z,{ref:r,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e,children:[i,s.jsxs(q,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(E,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));V.displayName=z.displayName;const W=({className:t,...i})=>s.jsx("div",{className:m("flex flex-col space-y-1.5 text-center sm:text-left",t),...i});W.displayName="DialogHeader";const X=p.forwardRef(({className:t,...i},e)=>s.jsx(F,{ref:e,className:m("text-lg font-semibold leading-none tracking-tight",t),...i}));X.displayName=F.displayName;const $=p.forwardRef(({className:t,...i},e)=>s.jsx(I,{ref:e,className:m("text-sm text-muted-foreground",t),...i}));$.displayName=I.displayName;const ts=({customer:t,onClose:i})=>{const[e,r]=p.useState({shipping:{...t.shipping,first_name:t.shipping.first_name||t.first_name,last_name:t.shipping.last_name||t.last_name,address_1:t.shipping.address_1||"",city:t.shipping.city||"",state:t.shipping.state||"",postcode:t.shipping.postcode||"",country:t.shipping.country||"IT"},billing:{...t.billing,address_1:t.billing.address_1||"",city:t.billing.city||"",state:t.billing.state||"",postcode:t.billing.postcode||"",country:t.billing.country||"IT"}}),h=H(),n=(a,c)=>{const{name:l,value:g}=a.target;r({...e,[c]:{...e[c],[l]:g}})},P=a=>{var g,u,f,b,A,B,y,_,j,N,v,C,w;a.preventDefault();const c=x=>{const R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return x&&x.trim()&&R.test(x.trim())},l={shipping:{first_name:((g=e.shipping.first_name)==null?void 0:g.trim())||"",last_name:((u=e.shipping.last_name)==null?void 0:u.trim())||"",company:e.shipping.company||"",address_1:((f=e.shipping.address_1)==null?void 0:f.trim())||"",address_2:e.shipping.address_2||"",city:((b=e.shipping.city)==null?void 0:b.trim())||"",state:((A=e.shipping.state)==null?void 0:A.trim())||"",postcode:((B=e.shipping.postcode)==null?void 0:B.trim())||"",country:e.shipping.country||"IT"},billing:{first_name:((y=e.shipping.first_name)==null?void 0:y.trim())||"",last_name:((_=e.shipping.last_name)==null?void 0:_.trim())||"",company:e.billing.company||"",address_1:((j=e.shipping.address_1)==null?void 0:j.trim())||"",address_2:e.billing.address_2||"",city:((N=e.shipping.city)==null?void 0:N.trim())||"",state:((v=e.shipping.state)==null?void 0:v.trim())||"",postcode:((C=e.shipping.postcode)==null?void 0:C.trim())||"",country:e.shipping.country||"IT",phone:((w=t.billing)==null?void 0:w.phone)||""}};c(t.email)&&(l.billing.email=t.email.trim()),console.log("Dati puliti da inviare:",l),h.mutate({id:t.id,customerData:l},{onSuccess:()=>{console.log("Chiusura del dialogo in corso..."),i()}})};return s.jsxs("form",{onSubmit:P,className:"space-y-2 sm:space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_first_name",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"Nome"}),s.jsx(o,{id:"shipping_first_name",name:"first_name",value:e.shipping.first_name,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 focus:ring-[#1B5AAB] rounded-md text-[#1B5AAB] placeholder:text-[#1B5AAB]/60 selection:bg-[#1B5AAB]/20 text-sm border-gray-300 focus:border-[#1B5AAB]",required:!0})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_last_name",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"Cognome"}),s.jsx(o,{id:"shipping_last_name",name:"last_name",value:e.shipping.last_name,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 focus:ring-[#1B5AAB] rounded-md text-[#1B5AAB] placeholder:text-[#1B5AAB]/60 selection:bg-[#1B5AAB]/20 text-sm border-gray-300 focus:border-[#1B5AAB]",required:!0})]})]}),s.jsx("div",{children:s.jsx(M,{label:"Indirizzo",placeholder:"Inizia a digitare l'indirizzo...",value:e.shipping.address_1,onChange:a=>{r({...e,shipping:{...e.shipping,address_1:a}})},onAddressSelect:a=>{r({...e,shipping:{...e.shipping,address_1:a.address,city:a.city,state:a.province,postcode:a.postalCode}})},required:!0})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_city",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"CittÃ  *"}),s.jsx(o,{id:"shipping_city",name:"city",value:e.shipping.city,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 focus:ring-[#1B5AAB] rounded-md text-[#1B5AAB] placeholder:text-[#1B5AAB]/60 selection:bg-[#1B5AAB]/20 text-sm border-gray-300 focus:border-[#1B5AAB]",required:!0})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_state",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"Provincia *"}),s.jsx(o,{id:"shipping_state",name:"state",value:e.shipping.state,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 focus:ring-[#1B5AAB] rounded-md text-[#1B5AAB] placeholder:text-[#1B5AAB]/60 selection:bg-[#1B5AAB]/20 text-sm border-gray-300 focus:border-[#1B5AAB]",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 sm:gap-3",children:[s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_postcode",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"CAP *"}),s.jsx(o,{id:"shipping_postcode",name:"postcode",value:e.shipping.postcode,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 focus:ring-[#1B5AAB] rounded-md text-[#1B5AAB] placeholder:text-[#1B5AAB]/60 selection:bg-[#1B5AAB]/20 text-sm border-gray-300 focus:border-[#1B5AAB]",required:!0})]}),s.jsxs("div",{children:[s.jsx(d,{htmlFor:"shipping_country",className:"text-xs sm:text-sm font-semibold text-[#1B5AAB] mb-1 block",children:"Paese"}),s.jsx(o,{id:"shipping_country",name:"country",value:e.shipping.country,onChange:a=>n(a,"shipping"),className:"h-8 sm:h-9 bg-gray-50 border-gray-200 text-gray-500 rounded-md text-sm",readOnly:!0})]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx(D,{type:"button",variant:"outline",onClick:i,className:"flex-1 h-8 sm:h-9 border-2 border-gray-300 text-gray-700 hover:bg-[#A40800] hover:text-white hover:border-[#A40800] transition-all duration-200 rounded-md font-medium text-sm",children:"Annulla"}),s.jsx(D,{type:"submit",disabled:h.isPending,className:"flex-1 h-8 sm:h-9 bg-[#1B5AAB] hover:bg-[#164a94] text-white disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 rounded-md font-medium shadow-lg hover:shadow-xl text-sm",children:h.isPending?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(O,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),s.jsx("span",{className:"hidden sm:inline",children:"Salvando..."}),s.jsx("span",{className:"sm:hidden",children:"..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"hidden sm:inline",children:"Salva Modifiche"}),s.jsx("span",{className:"sm:hidden",children:"Salva"})]})})]})]})};export{es as D,ts as E,V as a,W as b,X as c,$ as d};
