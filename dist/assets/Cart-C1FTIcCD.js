import{j as e,z as m,K as w,O as x,w as A,x as C}from"./ui-vendor-BbdbCsUZ.js";import{r as O}from"./react-vendor-DTdTrAaS.js";import{H as k}from"./Header-C9jOduFB.js";import{B as l}from"./button-DV96QXU2.js";import{C as z,a as B,b as _,c as q}from"./card-po8LLNoY.js";import{a as F,u as I,J as d,g as P}from"./index-CU51xw2J.js";import{e as L}from"./useWooCommerce-BVF7l480.js";import{L as o}from"./router-vendor-Dt4hhyuR.js";import"./input-BScXBkmv.js";import"./badge-Dt5wVqj5.js";import"./chart-vendor-CC4yw7IZ.js";import"./query-vendor-CYSRxJYb.js";import"./utils-vendor-BbYF_8OW.js";const X=()=>{var j;const{state:i,dispatch:c}=F(),{authState:t}=I(),h=t!=null&&t.isAuthenticated&&((j=t==null?void 0:t.user)!=null&&j.id)?t.user.id:null,{data:a,isLoading:E}=L(h,{enabled:!!h});O.useEffect(()=>{var s,r,u,g,b,N,f,y,v;t.isAuthenticated&&a&&(console.log("✅ Dati utente precaricati per checkout:",{nome:a.first_name,cognome:a.last_name,email:a.email,telefono:(s=a.billing)==null?void 0:s.phone,indirizzo:((r=a.shipping)==null?void 0:r.address_1)||((u=a.billing)==null?void 0:u.address_1),città:((g=a.shipping)==null?void 0:g.city)||((b=a.billing)==null?void 0:b.city),cap:((N=a.shipping)==null?void 0:N.postcode)||((f=a.billing)==null?void 0:f.postcode),provincia:((y=a.shipping)==null?void 0:y.state)||((v=a.billing)==null?void 0:v.state)}),d.success("Dati profilo precaricati per un checkout più veloce! 🚀",{duration:3e3,style:{backgroundColor:"#1B5AAB",color:"white",border:"none"}}))},[t.isAuthenticated,a]);const n=(s,r)=>{r<=0?(c({type:"REMOVE_ITEM",payload:s}),d.info("Prodotto rimosso dal carrello")):c({type:"UPDATE_QUANTITY",payload:{id:s,quantity:r}})},p=s=>{c({type:"REMOVE_ITEM",payload:s}),d.success("Prodotto rimosso dal carrello",{icon:e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:"#A11E26"},children:"✓"}),style:{border:"2px solid #A11E26",backgroundColor:"#A11E26",color:"white"}})},T=()=>{c({type:"CLEAR_CART"}),d.info("Carrello svuotato")};return i.items.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-16 md:pb-0",children:[e.jsx(k,{}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50 md:hidden",children:e.jsx(o,{to:"/prodotti",children:e.jsxs(l,{size:"lg",className:"w-full",style:{backgroundColor:"#1B5AAB",color:"white"},children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Continua lo Shopping"]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8 sm:py-16 pb-32 sm:pb-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl sm:text-6xl mb-4 sm:mb-6",children:"🛒"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-4",style:{color:"#1B5AAB"},children:"Il tuo carrello è vuoto"}),e.jsx("p",{className:"text-gray-600 mb-6 sm:mb-8 px-4",children:"Scopri i nostri fantastici prodotti e inizia a fare shopping!"}),e.jsx(o,{to:"/prodotti",className:"hidden md:block",children:e.jsxs(l,{size:"lg",className:"gradient-primary w-full sm:w-auto",children:[e.jsx(m,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Continua lo Shopping"]})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-16 md:pb-0",children:[e.jsx(k,{}),e.jsxs("div",{className:"container mx-auto px-4 py-6 sm:py-8 pb-40 sm:pb-8",children:[e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-50 md:hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"font-semibold text-lg",children:"Totale:"}),e.jsxs("span",{className:"font-bold text-xl",style:{color:"#A40800"},children:["€",i.total.toFixed(2)]})]}),e.jsx(o,{to:t.isAuthenticated?"/checkout":"/login",state:t.isAuthenticated?void 0:{from:"/checkout"},children:e.jsxs(l,{size:"lg",className:"w-full hover:opacity-90",style:{backgroundColor:"#1B5AAB",color:"white"},children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),t.isAuthenticated?"Procedi all'Ordine":"Accedi per Ordinare"]})})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-4xl font-bold mb-2 sm:mb-4",style:{color:"#1B5AAB"},children:"Il Tuo Carrello"}),e.jsxs("p",{className:"text-gray-600 text-sm sm:text-base",children:[i.items.length," ",i.items.length===1?"prodotto":"prodotti"," nel carrello",t.isAuthenticated&&e.jsx("span",{className:"ml-2 text-green-600 font-medium",children:E?"⏳ Caricamento dati...":a?"✅ Dati precaricati":""})]})]}),e.jsxs("div",{className:"flex flex-col lg:grid lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 mb-6 lg:mb-0",children:[i.items.map(s=>e.jsx(z,{className:"border-2",style:{borderColor:P(s.category)},children:e.jsxs(B,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"block sm:hidden space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base leading-tight mb-1",style:{color:"#1B5AAB"},children:s.name}),e.jsxs("p",{className:"font-bold text-lg",style:{color:"#A40800"},children:[s.price.toFixed(2),"€"]})]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>p(s.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-2",children:e.jsx(x,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>n(s.id,s.quantity-1),className:"w-8 h-8 p-0",children:e.jsx(A,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-8 text-center font-medium text-sm",children:s.quantity}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>n(s.id,s.quantity+1),className:"w-8 h-8 p-0",children:e.jsx(C,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-lg",children:[(s.price*s.quantity).toFixed(2),"€"]})})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-20 h-20 object-cover rounded-md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-lg truncate",style:{color:"#1B5AAB"},children:s.name}),e.jsxs("p",{className:"font-bold text-xl",style:{color:"#A40800"},children:[s.price.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>n(s.id,s.quantity-1),className:"w-8 h-8 p-0",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:s.quantity}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>n(s.id,s.quantity+1),className:"w-8 h-8 p-0",children:e.jsx(C,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-lg",children:[(s.price*s.quantity).toFixed(2),"€"]}),e.jsx(l,{variant:"ghost",size:"sm",onClick:()=>p(s.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(x,{className:"w-4 h-4"})})]})]})]})},s.id)),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-0 pt-4",children:[e.jsx(o,{to:"/prodotti",className:"w-full sm:w-auto",children:e.jsxs(l,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Continua lo Shopping"]})}),e.jsxs(l,{variant:"outline",onClick:T,className:"text-red-500 hover:text-red-700 hover:bg-red-50 w-full sm:w-auto",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Svuota Carrello"]})]})]}),e.jsx("div",{className:"lg:order-last mb-8 lg:mb-0 hidden md:block",children:e.jsxs(z,{className:"lg:sticky lg:top-32 mb-20 md:mb-0",children:[e.jsx(_,{children:e.jsx(q,{className:"text-lg sm:text-xl",children:"Riepilogo Ordine"})}),e.jsxs(B,{className:"space-y-4 pb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Subtotale:"}),e.jsxs("span",{style:{color:"#A40800"},children:["€",i.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm sm:text-base",children:[e.jsx("span",{children:"Spedizione:"}),e.jsx("span",{className:"text-green-600 font-semibold",children:"Gratuita"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between text-base sm:text-lg font-bold",children:[e.jsx("span",{children:"Totale:"}),e.jsxs("span",{style:{color:"#A40800"},children:["€",i.total.toFixed(2)]})]}),e.jsx(o,{to:t.isAuthenticated?"/checkout":"/login",state:t.isAuthenticated?void 0:{from:"/checkout"},className:"hidden md:block",children:e.jsxs(l,{size:"lg",className:"w-full hover:opacity-90",style:{backgroundColor:"#1B5AAB",color:"white"},children:[e.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),t.isAuthenticated?"Procedi all'Ordine":"Accedi per Ordinare"]})}),e.jsxs("div",{className:"text-center text-xs sm:text-sm text-gray-500 space-y-1",children:[e.jsx("p",{children:"🔒 Pagamento sicuro e protetto"}),e.jsx("p",{children:"✓ Garanzia soddisfatti o rimborsati"}),e.jsx("p",{children:"🚚 Spedizione sempre gratuita"}),t.isAuthenticated&&a&&e.jsx("p",{className:"text-green-600 font-medium",children:"⚡ Checkout veloce attivo"})]})]})]})})]})]})]})};export{X as default};
