import{j as e,s as A,t as G,v as z,w as P,q as Q,p as U,x as q}from"./ui-vendor-CBu0MraC.js";import{r as b,a as V}from"./react-vendor-DTdTrAaS.js";import{b as H,L as g}from"./router-vendor-C3VyKldT.js";import{H as j,B as u}from"./Header-Chz8Xda_.js";import{P as X}from"./ProductCard-McAvPI1V.js";import{B as h}from"./input-BrCX-FV-.js";import{C as _,a as k}from"./card-CJGvcwoN.js";import{a as Z,g as o,J as d}from"./index-I5fS8uHh.js";import{d as J,u as Y}from"./useWooCommerce-izqWt-aK.js";import"./chart-vendor-tNssjKKI.js";import"./query-vendor-CZPvIwdz.js";import"./utils-vendor-BbYF_8OW.js";const pe=()=>{var y,C;const{id:n}=H(),{state:r,dispatch:m}=Z(),[l,x]=b.useState(0),[K,L]=b.useState(!1),[T,B]=b.useState(null),{data:s,isLoading:I,error:F}=J(parseInt(n||"0")),p=(C=(y=s==null?void 0:s.categories)==null?void 0:y[0])==null?void 0:C.id,{data:f,isLoading:O}=Y({category:(p==null?void 0:p.toString())||"",per_page:12,exclude:[parseInt(n||"0")]},{enabled:!!p});if(V.useEffect(()=>{const a=r.items.find(i=>i.id===parseInt(n||"0"));x(a?a.quantity:0),L(!0)},[r.items,n]),I)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{}),e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(A,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-purple-600"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Caricamento prodotto..."}),e.jsx("p",{className:"text-gray-600",children:"Stiamo recuperando le informazioni del prodotto."})]})]});if(F||!s)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{}),e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Prodotto non trovato"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Il prodotto che stai cercando non esiste o √® stato rimosso."}),e.jsx(g,{to:"/products",children:e.jsxs(h,{className:"gradient-primary",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Torna ai Prodotti"]})})]})]});const c=r.items.find(a=>a.id===parseInt(n||"0")),t={id:s.id,name:s.name||"Prodotto senza nome",price:s.price?parseFloat(s.price):0,originalPrice:s.regular_price&&s.sale_price&&parseFloat(s.regular_price)>parseFloat(s.sale_price)?parseFloat(s.regular_price):void 0,image:s.images&&s.images.length>0?s.images[0].src:"/placeholder.svg",rating:s.average_rating?parseFloat(s.average_rating):0,reviews:s.rating_count||0,description:s.short_description||s.description||"Nessuna descrizione disponibile",inStock:s.stock_status==="instock",category:s.categories&&s.categories.length>0?s.categories[0].name:void 0,short_description:s.short_description||s.description},N=(f==null?void 0:f.map(a=>({id:a.id,name:a.name||"Prodotto senza nome",price:a.price?parseFloat(a.price):0,originalPrice:a.regular_price&&a.sale_price&&parseFloat(a.regular_price)>parseFloat(a.sale_price)?parseFloat(a.regular_price):void 0,image:a.images&&a.images.length>0?a.images[0].src:"/placeholder.svg",rating:a.average_rating?parseFloat(a.average_rating):0,reviews:a.rating_count||0,inStock:a.stock_status==="instock",category:a.categories&&a.categories.length>0?a.categories[0].name:void 0,short_description:a.short_description||a.description,stock_status:a.stock_status})).filter(a=>a.inStock))||[],v=t.originalPrice?Math.round((t.originalPrice-t.price)/t.originalPrice*100):null;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(j,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("nav",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(g,{to:"/",className:"hover:text-purple-600",children:"Home"}),e.jsx("span",{children:"/"}),e.jsx(g,{to:"/products",className:"hover:text-purple-600",children:"Prodotti"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-gray-900",children:t.name})]})}),e.jsx(_,{className:"overflow-hidden",style:{borderLeft:`4px solid ${o(t.category)}`,borderColor:o(t.category)},children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-shrink-0 relative mx-auto md:mx-0",children:[e.jsx("img",{src:t.image,alt:t.name,className:`w-[150px] h-[150px] object-cover rounded-lg bg-white p-2 ${t.inStock?"":"grayscale opacity-75"}`,onError:a=>{a.currentTarget.src="/placeholder.svg"}}),!t.inStock&&e.jsx(u,{className:"absolute top-2 left-2 bg-red-500 text-white",children:"Non Disponibile"}),t.inStock&&v&&e.jsxs(u,{className:"absolute top-2 left-2 bg-red-500 text-white",children:["-",v,"%"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold mb-3",style:{color:"#A40800"},children:t.name}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-2xl font-bold text-sky-600",children:[t.price.toFixed(2),"‚Ç¨"]}),t.originalPrice&&e.jsxs("span",{className:"text-lg text-gray-500 line-through",children:[t.originalPrice.toFixed(2),"‚Ç¨"]})]}),v&&t.inStock&&e.jsxs("span",{className:"text-green-600 font-medium text-sm",children:["Risparmi ",(t.originalPrice-t.price).toFixed(2),"‚Ç¨!"]})]}),e.jsx("div",{className:"mb-4",children:t.inStock?e.jsx(u,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"‚úì Disponibile"}):e.jsx(u,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"‚úó Non disponibile"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Descrizione"}),e.jsx("div",{className:"text-gray-600 text-sm",dangerouslySetInnerHTML:{__html:t.description.replace(/<[^>]*>/g,"")}})]}),e.jsx("div",{className:"flex flex-col space-y-4",children:t.inStock?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full p-1",children:[e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{const a=Math.max(0,l-1);x(a),c&&(a===0?(m({type:"REMOVE_ITEM",payload:t.id}),d.success(`${t.name} rimosso dal carrello`,{icon:e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:"#A11E26"},children:"‚úì"}),style:{border:"2px solid #A11E26",backgroundColor:"#A11E26",color:"white"}})):(m({type:"UPDATE_QUANTITY",payload:{id:t.id,quantity:a}}),d.success(`Quantit√† aggiornata: ${a}x ${t.name}`,{icon:e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:o(t.category)},children:"‚úì"}),style:{border:`2px solid ${o(t.category)}`}})))},className:"w-12 h-12 rounded-full bg-white shadow-sm hover:bg-gray-50 text-teal-600 font-bold text-lg",children:"‚àí"}),e.jsx("span",{className:"px-6 py-2 text-lg font-semibold text-gray-800 min-w-[60px] text-center",children:l}),e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>{const a=l+1;if(x(a),!t.inStock){d.error("Prodotto non disponibile");return}l===0&&a===1?(m({type:"ADD_ITEM",payload:{id:t.id,name:t.name,price:t.price,image:t.image,category:t.category}}),d.success(`${t.name} aggiunto al carrello`,{icon:e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:o(t.category)},children:"‚úì"}),style:{border:`2px solid ${o(t.category)}`}})):c&&a>1&&(m({type:"UPDATE_QUANTITY",payload:{id:t.id,quantity:a}}),d.success(`Quantit√† aggiornata: ${a}x ${t.name}`,{icon:e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold",style:{backgroundColor:o(t.category)},children:"‚úì"}),style:{border:`2px solid ${o(t.category)}`}}))},className:"w-12 h-12 rounded-full bg-white shadow-sm hover:bg-gray-50 text-teal-600 font-bold text-lg",children:"+"})]})}),l===0?e.jsxs("div",{className:"text-center text-sm text-red-600 bg-red-50 p-3 rounded-lg border border-red-200",children:[e.jsx(z,{className:"w-4 h-4 inline mr-2 text-red-600"}),"Prodotto non inserito nel carrello"]}):e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"w-4 h-4 inline mr-2 text-green-600"}),c?`Quantit√† nel carrello: ${c.quantity}`:`Quantit√† da aggiungere: ${l}`]}),c&&e.jsx(g,{to:"/cart",children:e.jsx(h,{variant:"outline",size:"sm",className:"ml-3 text-green-700 border-green-300 hover:bg-green-100",children:"Vai al carrello"})})]})]}):e.jsx("div",{className:"text-gray-500 text-sm font-medium bg-gray-100 px-4 py-2 rounded-md w-full text-center",children:"Questo prodotto non √® attualmente disponibile per l'acquisto"})})]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[{id:"certified",icon:e.jsx(P,{className:"w-6 h-6 text-green-600"}),title:"Prodotto CERTIFICATO e GARANTITO",borderColor:"border-green-600",titleColor:"text-green-600",ringColor:"ring-green-500",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"La conservazione di questo prodotto avviene in un luogo asciutto e lontano dai raggi solari, che ne potrebbero alterare il contenuto. La certificazione √® concessa dall'azienda Meloam S.p.a leader nel settore SICUREZZA SUL LAVORO che garantisce la tutela dei consumatori."}),e.jsx("p",{className:"text-xs text-orange-500 font-medium",children:"‚òÄÔ∏è Paura della plastica esposta al sole ‚òÄÔ∏è?? üò±üò±"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"üòä Niente paura üòä stai tranquillo"})]})},{id:"delivery",icon:e.jsx(Q,{className:"w-6 h-6 text-blue-600"}),title:"Consegna direttamente al piano",borderColor:"border-[#1B5AAB]",titleColor:"text-[#1B5AAB]",ringColor:"ring-[#1B5AAB]",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Questo prodotto verr√† consegnato direttamente fin dietro la porta di casa vostra o dove vi risulter√† pi√π comodo. Ovviamente non ci saranno costi aggiuntivi. √à tutto incluso nel prezzo che vedete esposto."}),e.jsx("p",{className:"text-xs text-red-500 font-bold",children:"‚ö° NESSUNO SFORZO DA PARTE VOSTRA üòä"}),e.jsx("p",{className:"text-xs text-gray-500 text-[10px]",children:"N.B. Gli appartamenti non muniti di ascensore potranno essere serviti ma la consegna potr√† avvenire massimo al primo piano"})]})},{id:"timing",icon:e.jsx(U,{className:"w-6 h-6 text-[#A40800]"}),title:"Tempi di consegna immediati",borderColor:"border-[#A40800]",titleColor:"text-[#A40800]",ringColor:"ring-[#A40800]",content:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Questo prodotto √® presente nei nostri magazzini e sar√† consegnato a distanza di un solo giorno lavorativo."}),e.jsx("p",{className:"text-xs text-red-500 font-bold",children:"‚è∞ TEMPI DI ATTESA NULLI"}),e.jsx("p",{className:"text-xs text-orange-500 font-medium",children:"üìÖ Ordina OGGI, consegnamo DOMANI üòä"})]})}].map(a=>{const i=T===a.id;return e.jsx(_,{className:`transition-all duration-300 cursor-pointer hover:shadow-lg border-2 ${a.borderColor} ${i?`ring-2 ${a.ringColor} shadow-lg`:"hover:shadow-md"}`,onClick:()=>B(i?null:a.id),children:e.jsxs(k,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[a.icon,e.jsx("h3",{className:`text-sm font-semibold ${a.titleColor}`,children:a.title})]}),e.jsx(q,{className:`w-5 h-5 transition-transform duration-300 ${a.titleColor} ${i?"rotate-180":""}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${i?"max-h-96 opacity-100 mt-4":"max-h-0 opacity-0"}`,children:a.content})]})},a.id)})}),e.jsx("div",{className:"mt-16 mb-8",children:e.jsx("div",{className:`bg-gradient-to-r ${W(t.category)} text-white py-6 overflow-hidden relative rounded-lg shadow-lg`,children:e.jsxs("div",{className:"animate-marquee whitespace-nowrap flex text-xl font-bold",children:[E(t.category).map((a,i)=>e.jsx("span",{className:"mx-12",children:a},i)),E(t.category).map((a,i)=>e.jsx("span",{className:"mx-12",children:a},`duplicate-${i}`))]})})}),N.length>0&&e.jsxs("div",{className:"mt-12 mb-8 md:mb-4",children:[e.jsx("h2",{className:"text-2xl mb-6 font-bold text-center text-red-700",children:"Prodotti Simili"}),O?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(A,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-purple-600"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento prodotti correlati..."})]}):e.jsx("div",{className:"relative",children:e.jsx("div",{className:"flex overflow-x-auto gap-6 pb-4 scrollbar-hide scroll-smooth cursor-grab active:cursor-grabbing",style:{scrollBehavior:"smooth"},onMouseDown:a=>{const i=a.currentTarget,M=a.pageX-i.offsetLeft,$=i.scrollLeft,S=R=>{const D=(R.pageX-i.offsetLeft-M)*2;i.scrollLeft=$-D},w=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",w),i.style.cursor="grab"};i.style.cursor="grabbing",document.addEventListener("mousemove",S),document.addEventListener("mouseup",w),a.preventDefault()},children:e.jsx("div",{className:"flex gap-6",children:N.map(a=>e.jsx("div",{className:"flex-shrink-0 w-48",children:e.jsx(X,{product:a})},a.id))})})})]})]})]})},W=n=>{if(!n)return"from-gray-400 via-gray-500 to-gray-400";const r=n.toLowerCase();return r.includes("acqua")?"from-blue-400 via-blue-500 to-blue-400":r.includes("birra")?"from-amber-400 via-amber-500 to-amber-400":r.includes("bevande")||r.includes("coca")||r.includes("fanta")||r.includes("schweppes")?"from-green-400 via-green-500 to-green-400":r.includes("vino")?"from-purple-400 via-purple-500 to-purple-400":"from-gray-400 via-gray-500 to-gray-400"},E=n=>{if(!n)return["üçπ Un Momento di Piacere in Ogni Sorso!","‚ùÑÔ∏è Rinfresca le Tue Giornate con Stile e Gusto!","üå∏ Ogni Bevanda √® un'Esperienza da Vivere!"];const r=n.toLowerCase().trim();return console.log("Categoria prodotto:",n,"Normalizzata:",r),r.includes("birra")?["üç∫ Ricca di Vitamine del Gruppo B: Gusto e Benessere!","üçª Stimola il Relax e Favorisce la Socialit√†!","üåæ Fonte Naturale di Antiossidanti dai Cereali!","ü´Ä Se Consumata con Moderazione, Fa Bene al Cuore!"]:r.includes("vino")?["üç∑ Un Bicchiere al Giorno, per il Benessere del Cuore!","üçá Ricco di Polifenoli: Gusto e Propriet√† Antiossidanti!","üßò‚Äç‚ôÇÔ∏è Favorisce il Relax e la Buona Compagnia!","ü´Ä Il Piacere del Vino, con Benefici per la Circolazione!"]:r.includes("bevande")||r.includes("bevanda")?["üçπ Un Momento di Piacere in Ogni Sorso!","‚ùÑÔ∏è Rinfresca le Tue Giornate con Stile e Gusto!","üå∏ Ogni Bevanda √® un'Esperienza da Vivere!"]:r.includes("acqua")?["üíß Idratazione Ottimale per Tutta la Giornata!","üß† Aiuta la Concentrazione e la Memoria!","üåø Favorisce la Depurazione dell'Organismo!","üí™ Supporta le Prestazioni Fisiche e Sportive!","üõå Migliora la Qualit√† del Sonno!","üåû Essenziale Durante le Giornate Calde!","üß¥ Pelle pi√π Luminosa e Sana!","‚öñÔ∏è Aiuta a Mantenere il Peso Forma!","ü´Ä Stimola la Circolazione e la Salute del Cuore!","üöø Purifica e Rinfresca in Ogni Momento!"]:["üçπ Un Momento di Piacere in Ogni Sorso!","üçµ Coccole Calde per l'Anima e il Corpo!","‚ùÑÔ∏è Rinfresca le Tue Giornate con Stile e Gusto!","üå∏ Ogni Bevanda √® un'Esperienza da Vivere!"]};export{pe as default};
