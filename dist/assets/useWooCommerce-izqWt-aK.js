import{u as t,b as c,c as m}from"./query-vendor-CZPvIwdz.js";import{w as s,J as a}from"./index-I5fS8uHh.js";const l=(e={},o)=>t({queryKey:["woocommerce-products",e],queryFn:()=>s.getProducts(e),staleTime:5*60*1e3,gcTime:10*60*1e3,...o}),g=(e,o)=>t({queryKey:["woocommerce-product",e],queryFn:()=>s.getProduct(e),enabled:!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,...o}),y=(e={},o)=>t({queryKey:["woocommerce-categories",e],queryFn:()=>s.getCategories(e),staleTime:10*60*1e3,gcTime:30*60*1e3,...o}),d=(e={},o)=>t({queryKey:["woocommerce-sale-products",e],queryFn:()=>s.getSaleProducts(e),staleTime:5*60*1e3,gcTime:10*60*1e3,...o}),C=(e,o)=>t({queryKey:["woocommerce-customer",e],queryFn:()=>e?s.getCustomer(e):null,enabled:(o==null?void 0:o.enabled)!==!1&&!!e,staleTime:5*60*1e3}),T=(e,o)=>t({queryKey:["woocommerce-customer-email",e],queryFn:()=>s.getCustomerByEmail(e),enabled:!!e&&e.includes("@"),staleTime:5*60*1e3,gcTime:10*60*1e3,...o}),E=(e,o={},r)=>t({queryKey:["woocommerce-customer-orders",e,o],queryFn:()=>s.getCustomerOrders(e,o),enabled:!!e,staleTime:2*60*1e3,gcTime:5*60*1e3,...r}),q=()=>async e=>await s.createOrder(e),w=e=>t({queryKey:["woocommerce-payment-gateways"],queryFn:()=>s.getPaymentGateways(),staleTime:30*60*1e3,gcTime:60*60*1e3,...e}),p=()=>{const e=c();return m({mutationFn:async({id:o,customerData:r})=>{if(console.log("=== INIZIO AGGIORNAMENTO CLIENTE ==="),console.log("ID Cliente:",o),console.log("Dati da aggiornare:",JSON.stringify(r,null,2)),!o||o<=0)throw new Error("ID cliente non valido");return await s.updateCustomer(o,r)},onSuccess:(o,r)=>{console.log("=== AGGIORNAMENTO COMPLETATO ==="),console.log("Dati aggiornati:",o),e.invalidateQueries({queryKey:["woocommerce-customer",o.id]}),r.customerData.shipping||r.customerData.billing?a.success("Indirizzo aggiornato con successo!"):r.customerData.meta_data?console.log("Meta data aggiornati silenziosamente"):a.success("Profilo aggiornato con successo!")},onError:o=>{var r,n;console.error("=== ERRORE AGGIORNAMENTO CLIENTE ==="),console.error("Errore completo:",o),(r=o.response)!=null&&r.data?(console.error("Risposta API:",o.response.data),o.response.data.code==="rest_invalid_param"?(console.error("Parametri non validi:",(n=o.response.data.data)==null?void 0:n.params),a.error("Errore: parametri non validi. Controlla i dati inseriti.")):o.response.data.message?a.error(`Errore: ${o.response.data.message}`):a.error("Errore nell'aggiornamento dei dati cliente")):a.error("Errore di connessione. Riprova pi√π tardi.")}})};export{d as a,E as b,y as c,g as d,C as e,p as f,T as g,w as h,q as i,l as u};
